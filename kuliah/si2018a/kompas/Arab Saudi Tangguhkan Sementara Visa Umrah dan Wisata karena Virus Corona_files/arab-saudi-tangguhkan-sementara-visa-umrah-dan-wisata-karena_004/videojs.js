window.noAdBlock=!0,function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsContribAds=t(e.videojs)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},n=function(e,n,o){t(0,o),e.trigger({type:n+o.type,originalEvent:o})},o=function(e,o){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&n(e,"content",o):e.ads._cancelledPlay?t(0,o):n(e,"ad",o))},a=function(e,t){if(e.ads.isInAdMode()){if(e.ads.isContentResuming())return;n(e,"ad",t)}else e.ads._contentHasEnded||n(e,"content",t)},r=function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())n(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;n(e,"content",t)}},i=function(e,t){var o=e.ads._cancelledPlay&&!e.ads.isInAdMode();e.ads.inAdBreak()?n(e,"ad",t):(e.ads.isContentResuming()||o)&&n(e,"content",t)};function d(e){"playing"===e.type?o(this,e):"ended"===e.type?a(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?r(this,e):"play"===e.type?i(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?n(this,"content",e):n(this,"ad",e))}var s,u="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l="undefined"!=typeof window?window:void 0!==u?u:"undefined"!=typeof self?self:{},c={},p=(Object.freeze||Object)({default:c}),f=p&&c||p,h=void 0!==u?u:"undefined"!=typeof window?window:{};"undefined"!=typeof document?s=document:(s=h["__GLOBAL_DOCUMENT_CACHE@4"])||(s=h["__GLOBAL_DOCUMENT_CACHE@4"]=f);var y=s,g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=(function(){function e(e){this.value=e}function t(t){var n,o;function a(n,o){try{var i=t[n](o),d=i.value;d instanceof e?Promise.resolve(d.value).then(function(e){a("next",e)},function(e){a("throw",e)}):r(i.done?"return":"normal",i.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?a(n.key,n.arg):o=null}this._invoke=function(e,t){return new Promise(function(r,i){var d={key:e,arg:t,resolve:r,reject:i,next:null};o?o=o.next=d:(n=o=d,a(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),m=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},A=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},T=function(e,t){return t?encodeURIComponent(e):e},b=function(e,t,n){if(e&&e[n])for(var o=e[n],a=Object.keys(o),r=0;r<a.length;r++){t["{mediainfo."+n+"."+a[r]+"}"]=o[a[r]]}};var _={processMetadataTracks:function(e,t){for(var n=e.textTracks(),o=function(n){"metadata"===n.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(n),t(e,n))},a=0;a<n.length;a++)o(n[a]);n.addEventListener("addtrack",function(e){o(e.track)})},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}},k=function(e,t){return void 0!==t&&e.ads.includedCues[t]},S=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};_.processAdTrack=function(t,n,o,a){t.ads.includedCues={};for(var r=0;r<n.length;r++){var i=n[r],d=this.getSupportedAdCue(t,i);if(!this.isSupportedAdCue(t,i))return void e.log.warn("Skipping as this is not a supported ad cue.",i);var s=this.getCueId(t,i),u=i.startTime;if(k(t,s))return void e.log("Skipping ad already seen with ID "+s);a&&a(t,d,s,u),o(t,d,s,u),S(t,s)}};var C=function(){function t(e){v(this,t),this.player=e}return t.prototype.transitionTo=function(e){var t=this.player;this.cleanup();var n=new e(t);t.ads._state=n,t.ads.debug(this.constructor.name+" -> "+n.constructor.name);for(var o=arguments.length,a=Array(o>1?o-1:0),r=1;r<o;r++)a[r-1]=arguments[r];n.init.apply(n,[t].concat(a))},t.prototype.init=function(){},t.prototype.cleanup=function(){},t.prototype.onPlay=function(){},t.prototype.onPlaying=function(){},t.prototype.onEnded=function(){},t.prototype.onAdsReady=function(){e.log.warn("Unexpected adsready event")},t.prototype.onAdsError=function(){},t.prototype.onAdsCanceled=function(){},t.prototype.onAdTimeout=function(){},t.prototype.onAdStarted=function(){},t.prototype.onContentChanged=function(){},t.prototype.onContentResumed=function(){},t.prototype.onContentEnded=function(){e.log.warn("Unexpected contentended event")},t.prototype.onNoPreroll=function(){},t.prototype.onNoPostroll=function(){},t.prototype.startLinearAdMode=function(){e.log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor.name+")")},t.prototype.endLinearAdMode=function(){e.log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor.name+")")},t.prototype.skipLinearAdMode=function(){e.log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor.name+")")},t.prototype.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor.name)},t.prototype.isContentResuming=function(){return!1},t.prototype.inAdBreak=function(){return!1},t.prototype.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"contentended"===e?this.onContentEnded(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e&&this.onNoPostroll(t)},t}(),P=function(e){function t(n){v(this,t);var o=A(this,e.call(this,n));return o.contentResuming=!1,o}return m(t,e),t.prototype.isAdState=function(){return!0},t.prototype.onPlaying=function(){this.contentResuming&&this.transitionTo(x)},t.prototype.onContentResumed=function(){this.contentResuming&&this.transitionTo(x)},t.prototype.isContentResuming=function(){return this.contentResuming},t.prototype.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(C),L=function(e){function t(){return v(this,t),A(this,e.apply(this,arguments))}return m(t,e),t.prototype.isAdState=function(){return!1},t.prototype.onContentChanged=function(e){e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(j):(this.transitionTo(M,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(C);function R(e){e.ads.cancelPlayTimeout||(e.ads.cancelPlayTimeout=e.setTimeout(function(){e.ads.cancelPlayTimeout=null,e.ads.isInAdMode()&&(e.ads.settings.delayPreroll||e.paused()||e.pause(),e.ads._cancelledPlay=!0)},1))}var w={start:function(t){t.ads.debug("Starting ad break"),t.ads._inLinearAdMode=!0,t.trigger("adstart"),t.ads.shouldPlayContentBehindAd(t)||(t.ads.snapshot=function(t){var n=void 0;n=e.browser.IS_IOS&&t.ads.isLive(t)&&t.seekable().length>0?t.currentTime()-t.seekable().end(0):t.currentTime();var o=t.$(".vjs-tech"),a=t.textTracks?t.textTracks():[],r=[],i={ended:t.ended(),currentSrc:t.currentSrc(),src:t.tech_.src(),currentTime:n,type:t.currentType()};o&&(i.nativePoster=o.poster,i.style=o.getAttribute("style"));for(var d=0;d<a.length;d++){var s=a[d];r.push({track:s,mode:s.mode}),s.mode="disabled"}return i.suppressedTracks=r,i}(t)),t.ads.shouldPlayContentBehindAd(t)&&(t.ads.preAdVolume_=t.volume(),t.volume(0)),t.addClass("vjs-ad-playing"),t.hasClass("vjs-live")&&t.removeClass("vjs-live"),t.ads.removeNativePoster()},end:function(t){t.ads.debug("Ending ad break"),t.ads.adType=null,t.ads._inLinearAdMode=!1,t.trigger("adend"),t.removeClass("vjs-ad-playing"),t.ads.isLive(t)&&t.addClass("vjs-live"),t.ads.shouldPlayContentBehindAd(t)||function(t,n){if(!0!==t.ads.disableNextSnapshotRestore){var o=t.$(".vjs-tech"),a=20,r=n.suppressedTracks,i=void 0,d=function(){for(var e=0;e<r.length;e++)(i=r[e]).track.mode=i.mode},s=function(){var o=void 0;e.browser.IS_IOS&&t.ads.isLive(t)?n.currentTime<0&&(o=t.seekable().length>0?t.seekable().end(0)+n.currentTime:t.currentTime(),t.currentTime(o)):n.ended?t.currentTime(t.duration()):t.currentTime(n.currentTime),n.ended||t.play(),t.ads.shouldRemoveAutoplay_&&(t.autoplay(!1),t.ads.shouldRemoveAutoplay_=!1)},u=function n(){if(t.off("contentcanplay",n),t.ads.tryToResumeTimeout_&&(t.clearTimeout(t.ads.tryToResumeTimeout_),t.ads.tryToResumeTimeout_=null),(o=t.el().querySelector(".vjs-tech")).readyState>1)return s();if(void 0===o.seekable)return s();if(o.seekable.length>0)return s();if(a--)t.setTimeout(n,50);else try{s()}catch(t){e.log.warn("Failed to resume the content after an advertisement",t)}};n.nativePoster&&(o.poster=n.nativePoster),"style"in n&&o.setAttribute("style",n.style||""),t.ads.videoElementRecycled()?(t.one("contentloadedmetadata",d),e.browser.IS_IOS&&!t.autoplay()&&(t.autoplay(!0),t.ads.shouldRemoveAutoplay_=!0),t.src({src:n.currentSrc,type:n.type}),t.one("contentcanplay",u),t.ads.tryToResumeTimeout_=t.setTimeout(u,2e3)):(d(),t.ended()||t.play())}else t.ads.disableNextSnapshotRestore=!1}(t,t.ads.snapshot),t.ads.shouldPlayContentBehindAd(t)&&t.volume(t.ads.preAdVolume_)}},M=function(t){function n(){return v(this,n),A(this,t.apply(this,arguments))}return m(n,t),n.prototype.init=function(e,t){e.addClass("vjs-ad-loading");var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(n=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout(function(){e.trigger("adtimeout")},n),t?this.handleAdsReady():this.adsReady=!1},n.prototype.onAdsReady=function(t){t.ads.inAdBreak()||t.ads.isContentResuming()?e.log.warn("Unexpected adsready event (Preroll)"):(t.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},n.prototype.handleAdsReady=function(){this.adsReady=!0,this.player.ads.nopreroll_?this.noPreroll():this.readyForPreroll()},n.prototype.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",function(){t.ads.debug("Received loadstart event"),e()}))},n.prototype.noPreroll=function(){var e=this;this.afterLoadStart(function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.transitionTo(x)})},n.prototype.readyForPreroll=function(){var e=this.player;this.afterLoadStart(function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")})},n.prototype.onPlay=function(e){e.ads.debug("Received play event (Preroll)"),this.inAdBreak()||this.isContentResuming()||R(this.player)},n.prototype.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart(function(){t.transitionTo(x)})},n.prototype.onAdsError=function(t){var n=this;e.log("adserror (Preroll)"),this.inAdBreak()&&t.ads.endLinearAdMode(),this.afterLoadStart(function(){n.transitionTo(x)})},n.prototype.startLinearAdMode=function(){var t=this.player;!this.adsReady||t.ads.inAdBreak()||this.isContentResuming()?e.log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(t.clearTimeout(this._timeout),t.ads.adType="preroll",w.start(t))},n.prototype.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.prototype.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),w.end(e),this.contentResuming=!0)},n.prototype.skipLinearAdMode=function(){var t=this,n=this.player;n.ads.inAdBreak()||this.isContentResuming()?e.log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart(function(){n.trigger("adskip"),n.ads.debug("skipLinearAdMode (Preroll)"),t.transitionTo(x)})},n.prototype.onAdTimeout=function(e){var t=this;this.afterLoadStart(function(){e.ads.debug("adtimeout (Preroll)"),t.transitionTo(x)})},n.prototype.onNoPreroll=function(t){t.ads.inAdBreak()||this.isContentResuming()?e.log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},n.prototype.cleanup=function(){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife||e.log.warn("Leaving Preroll state before loadstart event can cause issues."),t.removeClass("vjs-ad-loading"),t.clearTimeout(this._timeout)},n}(P),B=function(e){function t(){return v(this,t),A(this,e.apply(this,arguments))}return m(t,e),t.prototype.init=function(e){e.ads.adType="midroll",w.start(e)},t.prototype.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,w.end(e))},t.prototype.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},t}(P),E=function(t){function n(){return v(this,n),A(this,t.apply(this,arguments))}return m(n,t),n.prototype.init=function(e){var t=this;if(e.ads._contentEnding=!0,e.ads.nopostroll_)e.setTimeout(function(){e.ads.debug("Triggered ended event (no postroll)"),t.contentResuming=!0,e.trigger("ended")},1);else{e.addClass("vjs-ad-loading");var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(n=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout(function(){e.trigger("adtimeout")},n)}},n.prototype.startLinearAdMode=function(){var t=this.player;t.ads.inAdBreak()||this.isContentResuming()?e.log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(t.ads.adType="postroll",t.clearTimeout(this._postrollTimeout),w.start(t))},n.prototype.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.prototype.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),w.end(e),this.contentResuming=!0,e.ads.debug("Triggered ended event (endLinearAdMode)"),e.trigger("ended"))},n.prototype.skipLinearAdMode=function(){var t=this.player;t.ads.inAdBreak()||this.isContentResuming()?e.log.warn("Unexpected skipLinearAdMode invocation"):(t.ads.debug("Postroll abort (skipLinearAdMode)"),t.trigger("adskip"),this.abort())},n.prototype.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort()},n.prototype.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()&&e.ads.endLinearAdMode(),this.abort()},n.prototype.onEnded=function(){this.isContentResuming()?this.transitionTo(I):e.log.warn("Unexpected ended event during postroll")},n.prototype.onContentChanged=function(e){this.isContentResuming()?this.transitionTo(j):this.inAdBreak()||this.transitionTo(M)},n.prototype.onNoPostroll=function(t){this.isContentResuming()||this.inAdBreak()?e.log.warn("Unexpected nopostroll event (Postroll)"):this.transitionTo(I)},n.prototype.abort=function(){var e=this.player;this.contentResuming=!0,e.removeClass("vjs-ad-loading"),e.ads.debug("Triggered ended event (postroll abort)"),e.trigger("ended")},n.prototype.cleanup=function(){var e=this.player;e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},n}(P),j=function(e){function t(){return v(this,t),A(this,e.apply(this,arguments))}return m(t,e),t.prototype.init=function(e){this.adsReady=!1},t.prototype.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},t.prototype.onPlay=function(e){e.ads.debug("Received play event (BeforePreroll)"),R(e),this.transitionTo(M,this.adsReady)},t.prototype.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.transitionTo(x)},t.prototype.onAdsError=function(){this.transitionTo(x)},t.prototype.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.transitionTo(x)},t.prototype.skipLinearAdMode=function(){this.player.trigger("adskip"),this.transitionTo(x)},t.prototype.onContentChanged=function(){},t}(L),x=function(e){function t(){return v(this,t),A(this,e.apply(this,arguments))}return m(t,e),t.prototype.init=function(e){e.paused()&&(e.ads._cancelledPlay||e.ads._pausedOnContentupdate)&&e.play()},t.prototype.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},t.prototype.onContentEnded=function(e){e.ads.debug("Received contentended event"),this.transitionTo(E)},t.prototype.startLinearAdMode=function(){this.transitionTo(B)},t}(L),I=function(t){function n(){return v(this,n),A(this,t.apply(this,arguments))}return m(n,t),n.prototype.init=function(e){e.ads._contentHasEnded=!0},n.prototype.startLinearAdMode=function(){e.log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},n}(L),O=e.getTech("Html5").Events,D={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1},N=function(t){var n=this,o=e.mergeOptions(D,t),a=O.concat(["firstplay","loadedalldata","playing"]);n.on(a,d),n.setTimeout(function(){n.ads._hasThereBeenALoadStartDuringPlayerLife||""===n.src()||e.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see https://github.com/videojs/videojs-contrib-ads#important-note-about-initialization")},5e3),n.on("ended",function(){n.hasClass("vjs-has-started")||n.addClass("vjs-has-started")}),n.on(["addurationchange","adcanplay"],function(){n.ads.snapshot&&n.currentSrc()===n.ads.snapshot.currentSrc||n.ads.inAdBreak()&&n.play()}),n.on("nopreroll",function(){n.ads.debug("Received nopreroll event"),n.ads.nopreroll_=!0}),n.on("nopostroll",function(){n.ads.debug("Received nopostroll event"),n.ads.nopostroll_=!0}),n.on("playing",function(){n.ads._cancelledPlay=!1,n.ads._pausedOnContentupdate=!1}),n.one("loadstart",function(){n.ads._hasThereBeenALoadStartDuringPlayerLife=!0}),n.on("loadeddata",function(){n.ads._hasThereBeenALoadedData=!0}),n.on("loadedmetadata",function(){n.ads._hasThereBeenALoadedMetaData=!0}),n.ads={settings:o,disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,adType:null,VERSION:"__VERSION__",reset:function(){n.ads.disableNextSnapshotRestore=!1,n.ads._contentEnding=!1,n.ads._contentHasEnded=!1,n.ads.snapshot=null,n.ads.adType=null,n.ads._hasThereBeenALoadedData=!1,n.ads._hasThereBeenALoadedMetaData=!1,n.ads._cancelledPlay=!1,n.ads.nopreroll_=!1,n.ads.nopostroll_=!1},startLinearAdMode:function(){n.ads._state.startLinearAdMode()},endLinearAdMode:function(){n.ads._state.endLinearAdMode()},skipLinearAdMode:function(){n.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(this._stitchedAds=!!e),this._stitchedAds},videoElementRecycled:function(){if(n.ads.shouldPlayContentBehindAd(n))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var e=n.tech_.src()!==this.snapshot.src,t=n.currentSrc()!==this.snapshot.currentSrc;return e||t},isLive:function(t){return t.duration()===1/0||"8"===e.browser.IOS_VERSION&&0===t.duration()},shouldPlayContentBehindAd:function(t){return!e.browser.IS_IOS&&!e.browser.IS_ANDROID&&t.duration()===1/0},isInAdMode:function(){return this._state.isAdState()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var e=n.$(".vjs-tech");e&&e.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];1===n.length&&"string"==typeof n[0]?e.log("ADS: "+n[0]):e.log.apply(e,["ADS:"].concat(n))}}},n.ads._state=new j(n),n.ads.stitchedAds(o.stitchedAds),n.ads.cueTextTracks=_,n.ads.adMacroReplacement=function(t,n,o){void 0===n&&(n=!1);var a={};for(var r in void 0!==o&&(a=o),a["{player.id}"]=this.options_["data-player"],a["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",a["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",a["{mediainfo.description}"]=this.mediainfo?this.mediainfo.description:"",a["{mediainfo.tags}"]=this.mediainfo?this.mediainfo.tags:"",a["{mediainfo.reference_id}"]=this.mediainfo?this.mediainfo.reference_id:"",a["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",a["{mediainfo.ad_keys}"]=this.mediainfo?this.mediainfo.ad_keys:"",a["{player.duration}"]=this.duration(),a["{timestamp}"]=(new Date).getTime(),a["{document.referrer}"]=y.referrer,a["{window.location.href}"]=l.location.href,a["{random}"]=Math.floor(1e12*Math.random()),b(this.mediainfo,a,"custom_fields"),b(this.mediainfo,a,"customFields"),a)t=t.split(r).join(T(a[r],n));return t=t.replace(/{pageVariable\.([^}]+)}/g,function(t,o){for(var a=void 0,r=l,i=o.split("."),d=0;d<i.length;d++)d===i.length-1?a=r[i[d]]:r=r[i[d]];var s=void 0===a?"undefined":g(a);return null===a?"null":void 0===a?(e.log.warn('Page variable "'+o+'" not found'),""):"string"!==s&&"number"!==s&&"boolean"!==s?(e.log.warn('Page variable "'+o+'" is not a supported type'),""):T(String(a),n)})}.bind(n),function(e){e.ads.contentSrc=e.currentSrc(),e.ads._seenInitialLoadstart=!1,e.on("loadstart",function(){if(!e.ads.inAdBreak()){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.ads._seenInitialLoadstart&&e.trigger({type:"contentchanged"}),e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t),e.ads._seenInitialLoadstart=!0}})}(n),n.on("contentchanged",n.ads.reset);var r=function(){var t=n.textTracks();if(!n.ads.shouldPlayContentBehindAd(n)&&n.ads.inAdBreak()&&n.tech_.featuresNativeTextTracks&&e.browser.IS_IOS&&!Array.isArray(n.textTracks()))for(var o=0;o<t.length;o++){var a=t[o];"showing"===a.mode&&(a.mode="disabled")}};n.ready(function(){n.textTracks().addEventListener("change",r)}),n.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","ads-ad-started","contentchanged","contentresumed","contentended","nopreroll","nopostroll"],function(e){n.ads._state.handleEvent(e.type)}),n.on("dispose",function(){n.textTracks().removeEventListener("change",r)})};return(e.registerPlugin||e.plugin)("ads",N),N});
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):e(t.videojs)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e=null;location.href.indexOf("gmanetwork.com/")>-1&&(e=function(t,e,i){if(!1===e.hasOwnProperty("partnerCode"))return!1;var n=document.createElement("script");i=i||t&&(void 0!==t.O?t.O.parentNode:document.body)||document.body;var s=[],o={adsManager:t,ids:e,imaSDK:!0,events:[],dispatchEvent:function(t){var e=this.sendEvent,i=this.events;e?(i&&(i.push(t),t=i),e(t)):i.push(t)}},r={complete:"AdVideoComplete",firstquartile:"AdVideoFirstQuartile",impression:"AdImpression",loaded:"AdLoaded",midpoint:"AdVideoMidpoint",pause:"AdPaused",skip:"AdSkipped",start:"AdVideoStart",thirdquartile:"AdVideoThirdQuartile",volumeChange:"AdVolumeChange"};if(google&&google.ima&&t){var a,d="_moatApi"+Math.floor(1e8*Math.random());for(a in google.ima.AdEvent.Type){var l=function(e){if(o.sendEvent){for(e=s.length-1;0<=e;e--)t.removeEventListener(s[e].type,s[e].func);o.sendEvent(o.events)}else o.events.push({type:r[e.type]||e.type,adVolume:t.getVolume()})};t.addEventListener(google.ima.AdEvent.Type[a],l),s.push({type:google.ima.AdEvent.Type[a],func:l})}}var h,p;d=void 0!==d?d:"";try{p=(h=i.ownerDocument).defaultView||h.parentWindow}catch(t){h=document,p=window}return p[d]=o,n.type="text/javascript",i&&i.appendChild(n),n.src="https://z.moatads.com/"+e.partnerCode+"/moatvideo.js#"+d,o});var i=function(t,e,i){this.vjsPlayer=t,this.controller=i,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckIntervalHandle=null,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle=null,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentEndedListeners=[],this.contentSource="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=document.getElementById(this.controller.getSettings().id).getElementsByClassName("vjs-tech")[0],this.h5Player.hasAttribute("autoplay")&&this.controller.setSetting("adWillAutoPlay",!0),this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListener=this.localContentEndedListener.bind(this),this.vjsPlayer.on("ended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),this.vjsPlayer.ads(e)};i.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval),this.seekCheckIntervalHandle=setInterval(this.checkForSeeking.bind(this),this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval)},i.prototype.updateCurrentTime=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},i.prototype.checkForSeeking=function(){var t=1e3*(this.vjsPlayer.currentTime()-this.contentPlayheadTracker.previousTime);Math.abs(t)>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime()},i.prototype.checkForResize=function(){var t=this.getPlayerWidth(),e=this.getPlayerHeight();t==this.vjsPlayerDimensions.width&&e==this.vjsPlayerDimensions.height||(this.vjsPlayerDimensions.width=t,this.vjsPlayerDimensions.height=e,this.controller.onPlayerResize(t,e))},i.prototype.localContentEndedListener=function(){for(var t in this.contentComplete||(this.contentComplete=!0,this.controller.onContentComplete()),this.contentEndedListeners)"function"==typeof this.contentEndedListeners[t]&&this.contentEndedListeners[t]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.vjsPlayer.el()&&this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this))},i.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.controller.onPlayerDisposed(),this.contentComplete=!0,this.vjsPlayer.off("ended",this.localContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var t=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var e in t)t[e]&&clearInterval(t[e])},i.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll()},i.prototype.onPlayerReady=function(){this.onVolumeChange(),this.vjsPlayer.on("fullscreenchange",this.onFullscreenChange.bind(this)),this.vjsPlayer.on("volumechange",this.onVolumeChange.bind(this))},i.prototype.onFullscreenChange=function(){this.vjsPlayer.isFullscreen()?this.controller.onPlayerEnterFullscreen():this.controller.onPlayerExitFullscreen()},i.prototype.onVolumeChange=function(){var t=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(t)},i.prototype.injectAdContainerDiv=function(t){this.vjsControls.el().parentNode.appendChild(t)},i.prototype.getContentPlayer=function(){return this.h5Player},i.prototype.getVolume=function(){return this.vjsPlayer.muted()?0:this.vjsPlayer.volume()},i.prototype.setVolume=function(t){this.vjsPlayer.volume(t),0==t?this.vjsPlayer.muted(!0):this.vjsPlayer.muted(!1)},i.prototype.unmute=function(){this.vjsPlayer.muted(!1),this.vjsPlayer.volume(1)},i.prototype.mute=function(){this.vjsPlayer.muted(!0),this.vjsPlayer.volume(0)},i.prototype.play=function(){this.vjsPlayer.play()},i.prototype.getPlayerWidth=function(){var t=this.vjsPlayer.el().getBoundingClientRect()||{};return parseInt(t.width,10)||this.vjsPlayer.width()},i.prototype.getPlayerHeight=function(){var t=this.vjsPlayer.el().getBoundingClientRect()||{};return parseInt(t.height,10)||this.vjsPlayer.height()},i.prototype.toggleFullscreen=function(){this.vjsPlayer.isFullscreen()?this.vjsPlayer.exitFullscreen():this.vjsPlayer.requestFullscreen()},i.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker},i.prototype.onAdError=function(t,e){this.vjsControls.show();var i=void 0!==t.getError?t.getError():t.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:i,AdErrorEvent:t,type:e||"adError"}})},i.prototype.onAdBreakStart=function(t){this.contentSource=this.vjsPlayer.currentSrc(),this.vjsPlayer.off("ended",this.boundContentEndedListener),-1!=t.getAd().getAdPodInfo().getPodIndex()&&this.vjsPlayer.ads.startLinearAdMode(),this.vjsControls.hide(),!0===this.controller.settings.showAdContainerOnAdstart||this.vjsPlayer.pause()},i.prototype.onAdBreakEnd=function(){this.vjsPlayer.on("ended",this.boundContentEndedListener),this.vjsPlayer.ads.endLinearAdMode(),this.vjsControls.show()},i.prototype.onAdStart=function(){this.vjsPlayer.trigger("ads-ad-started")},i.prototype.onAllAdsCompleted=function(){1==this.contentComplete&&(this.h5Player.src!=this.contentSource&&this.vjsPlayer.src(this.contentSource),this.controller.onContentAndAdsCompleted())},i.prototype.onAdsReady=function(){this.vjsPlayer.trigger("adsready")},i.prototype.changeSource=function(t,e){this.vjsPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),t&&this.vjsPlayer.src(t),e?this.vjsPlayer.one("loadedmetadata",this.playContentFromZero.bind(this)):this.vjsPlayer.one("loadedmetadata",this.seekContentToZero.bind(this))},i.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0)},i.prototype.playContentFromZero=function(){this.vjsPlayer.currentTime(0),this.vjsPlayer.play()},i.prototype.addContentEndedListener=function(t){this.contentEndedListeners.push(t)},i.prototype.reset=function(){this.vjsPlayer.on("ended",this.boundContentEndedListener),this.vjsControls.show(),this.vjsPlayer.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0};var n=function(t){this.controller=t,this.adContainerDiv=document.createElement("div"),this.controlsDiv=document.createElement("div"),this.countdownDiv=document.createElement("div"),this.seekBarDiv=document.createElement("div"),this.progressDiv=document.createElement("div"),this.playPauseDiv=document.createElement("div"),this.muteDiv=document.createElement("div"),this.sliderDiv=document.createElement("div"),this.sliderLevelDiv=document.createElement("div"),this.fullscreenDiv=document.createElement("div"),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnMouseUp=this.onMouseMove.bind(this),this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.controlPrefix=this.controller.getSettings().id?this.controller.getSettings().id+"_":"",this.showCountdown=!0,!1===this.controller.getSettings().showCountdown&&(this.showCountdown=!1),this.createAdContainer()};n.prototype.createAdContainer=function(){this.assignControlAttributes(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1),this.createControls(),this.controller.injectAdContainerDiv(this.adContainerDiv),!0===this.controller.settings.showAdContainerOnAdstart&&this.adContainerDiv.insertAdjacentHTML("beforebegin","<style>#"+this.adContainerDiv.id+".showAdContainerOnAdstart{opacity:0;pointer-events: none;}</style>")},n.prototype.createControls=function(){this.assignControlAttributes(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.assignControlAttributes(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none",this.assignControlAttributes(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.assignControlAttributes(this.progressDiv,"ima-progress-div"),this.assignControlAttributes(this.playPauseDiv,"ima-play-pause-div"),this.addClass(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",this.onAdPlayPauseClick.bind(this),!1),this.assignControlAttributes(this.muteDiv,"ima-mute-div"),this.addClass(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",this.onAdMuteClick.bind(this),!1),this.assignControlAttributes(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",this.onAdVolumeSliderMouseDown.bind(this),!1),this.assignControlAttributes(this.sliderLevelDiv,"ima-slider-level-div"),this.assignControlAttributes(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.insertAdjacentHTML("afterend",'<div class="ima-gradian"></div>'),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controller.isNoFullscreenAd||this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)},n.prototype.onAdPlayPauseClick=function(){this.controller.onAdPlayPauseClick()},n.prototype.onAdMuteClick=function(){this.controller.onAdMuteClick()},n.prototype.onAdFullscreenClick=function(){this.controller.toggleFullscreen()},n.prototype.onAdsPaused=function(){this.addClass(this.playPauseDiv,"ima-paused"),this.removeClass(this.playPauseDiv,"ima-playing"),this.showAdControls()},n.prototype.onAdsResumed=function(){this.onAdsPlaying(),this.showAdControls()},n.prototype.onAdsPlaying=function(){this.addClass(this.playPauseDiv,"ima-playing"),this.removeClass(this.playPauseDiv,"ima-paused")},n.prototype.updateAdUi=function(t,e,i,n,s){var o=Math.floor(e/60),r=Math.floor(e%60);r.toString().length<2&&(r="0"+r);var a=": ";s>1&&(a=" ("+n+" of "+s+"): "),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+a+o+":"+r;var d=100*(t/i);this.progressDiv.style.width=d+"%"},n.prototype.unmute=function(){this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*this.controller.getPlayerVolume()+"%"},n.prototype.mute=function(){this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"},n.prototype.onAdVolumeSliderMouseDown=function(){document.addEventListener("mouseup",this.boundOnMouseUp,!1),document.addEventListener("mousemove",this.boundOnMouseMove,!1)},n.prototype.onMouseMove=function(t){this.changeVolume(t)},n.prototype.onMouseUp=function(t){this.changeVolume(t),document.removeEventListener("mouseup",this.boundOnMouseUp),document.removeEventListener("mousemove",this.boundOnMouseMove)},n.prototype.changeVolume=function(t){var e=(t.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;e*=100,e=Math.min(Math.max(e,0),100),this.sliderLevelDiv.style.width=e+"%",0==this.percent?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted")):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted")),this.controller.setVolume(e/100)},n.prototype.showAdContainer=function(){this.adContainerDiv.style.display="block",this.addClass(this.adContainerDiv,"showAdContainerOnAdstart")},n.prototype.onAdError=function(){this.adContainerDiv.style.display="none"},n.prototype.onAdBreakStart=function(t){this.adContainerDiv.style.display="block","application/javascript"!==t.getAd().getContentType()||this.controller.getSettings().showControlsForJSAds?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.onAdsPlaying(),this.hideAdControls()},n.prototype.onAdBreakEnd=function(){var t=this.controller.getCurrentAd();(null==t||t.isLinear())&&(this.adContainerDiv.style.display="none"),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""},n.prototype.onAllAdsCompleted=function(){this.adContainerDiv.style.display="none"},n.prototype.onLinearAdStart=function(){this.removeClass(this.adContainerDiv,"bumpable-ima-ad-container")},n.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display="block",!0===this.controller.getSettings().makeNonLinearBumpable&&this.addClass(this.adContainerDiv,"bumpable-ima-ad-container")},n.prototype.onPlayerEnterFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-non-fullscreen")},n.prototype.onPlayerExitFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-fullscreen")},n.prototype.onPlayerVolumeChanged=function(t){0==t?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*t+"%")},n.prototype.showAdControls=function(){this.addClass(this.controlsDiv,"ima-controls-div-showing"),this.playPauseDiv.style.display="block",this.muteDiv.style.display="block",this.sliderDiv.style.display="block",this.fullscreenDiv.style.display="block"},n.prototype.hideAdControls=function(){this.removeClass(this.controlsDiv,"ima-controls-div-showing"),this.playPauseDiv.style.display="none",this.muteDiv.style.display="none",this.sliderDiv.style.display="none",this.fullscreenDiv.style.display="none"},n.prototype.assignControlAttributes=function(t,e){t.id=this.controlPrefix+e,t.className=this.controlPrefix+e+" "+e},n.prototype.getClassRegexp=function(t){return new RegExp("(^|[^A-Za-z-])"+t+"((?![A-Za-z-])|$)","gi")},n.prototype.elementHasClass=function(t,e){return this.getClassRegexp(e).test(t.className)},n.prototype.addClass=function(t,e){t.className=t.className.trim()+" "+e},n.prototype.removeClass=function(t,e){var i=this.getClassRegexp(e);t.className=t.className.trim().replace(i,"")},n.prototype.getAdContainerDiv=function(){return this.adContainerDiv},n.prototype.setShowCountdown=function(t){this.showCountdown=t,this.countdownDiv.style.display=this.showCountdown?"block":"none"};var s="1.2.1",o=function(t){if(this.controller=t,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adTagUrl=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&0==this.controller.getSettings().delayPreroll)if(window.adsBridge&&window.adsBridge.getAdTagUrl){var e=window.adsBridge.getAdTagUrl();this.controller.setSetting("adTagUrl",e),this.requestAds()}else window.adsBridge&&window.adsBridge.requestAds?window.adsBridge.requestAds(this.controller.setAdsResponse.bind(this.controller),this.requestAds.bind(this)):this.requestAds()};o.prototype.initAdObjects=function(){/MiuiBrowser/.test(navigator.userAgent)?this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv()):this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings.locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings.numRedirects);var t=this.adsLoader.getSettings().getNumRedirects()+2;this.adsLoader.getSettings().setNumRedirects(t),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion(s),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1)},o.prototype.requestAds=function(){var t=new google.ima.AdsRequest;if(this.controller.getSettings().adsResponse)t.adsResponse=this.controller.getSettings().adsResponse;else{if(!this.controller.getSettings().adTagUrl)return;t.adTagUrl=this.controller.getSettings().adTagUrl}this.controller.getSettings().forceNonLinearFullSlot&&(t.forceNonLinearFullSlot=!0),this.controller.getSettings().vastLoadTimeout&&(t.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout),t.linearAdSlotWidth=this.controller.getPlayerWidth(),t.linearAdSlotHeight=this.controller.getPlayerHeight(),t.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),t.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),t.setAdWillAutoPlay(this.controller.getSettings().adWillAutoPlay);var e=void 0!==this.controller.playerWrapper.h5Player.muted?this.controller.playerWrapper.h5Player.muted:void 0!==this.controller.getSettings().adWillPlayMuted?this.controller.getSettings().adWillPlayMuted:0==this.controller.getPlayerVolume();t.setAdWillPlayMuted(e),t.adTagUrl&&t.adTagUrl.indexOf("liveGenericOverlay")>-1||t.adsResponse&&t.adsResponse.indexOf("Hotspot")>-1||this.controller.playerWrapper.vjsPlayer.trigger("ads-request"),this.adsLoader.requestAds(t)},o.prototype.onAdsManagerLoaded=function(t){if(this.createAdsRenderingSettings(),this.adsManager=t.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),e){var i={partnerCode:"gmanmidfpjsvideo934242758076",viewMode:google.ima.ViewMode.NORMAL,slicer1:"__SLICER1__",slicer2:"__SLICER2__"};e(this.adsManager,i,this.adContainerDiv),e=null}this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.controller.getIsMobile()&&(this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this))),this.controller.getSettings().adsRenderingSettings.enablePreloading?this.autoPlayAdBreaks||this.initAdsManager():this.autoPlayAdBreaks||this.controller.getSettings().manualAdBreaks||this.initAdsManager(),this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},o.prototype.triggerManualAdBreak=function(){if(!this.autoPlayAdBreaks){this.controller.getSettings().adsRenderingSettings.enablePreloading||this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start(),this.controller.playerWrapper.vjsPlayer.trigger("ads-trigger-start")}catch(t){this.onAdError(t)}}},o.prototype.onAdsLoaderError=function(t){window.console.warn("AdsLoader error: "+t.getError()),this.controller.onErrorLoadingAds(t),this.adsManager&&this.adsManager.destroy()},o.prototype.initAdsManager=function(){try{var t=this.controller.getPlayerWidth(),e=this.controller.getPlayerHeight();this.adsManagerDimensions.width=t,this.adsManagerDimensions.height=e,this.adsManager.init(t,e,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainer.initialized=!0)}catch(t){this.onAdError(t)}},o.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var t in this.controller.getSettings().adsRenderingSettings)""!==t&&(this.adsRenderingSettings[t]=this.controller.getSettings().adsRenderingSettings[t])},o.prototype.onAdError=function(t){var e=void 0!==t.getError?t.getError():t.stack;if(window.console.warn("Ad error: "+e),this.adsManager.destroy(),this.controller.onAdError(t),this.adErrorCallbackListeners)for(var i=0,n=this.adErrorCallbackListeners.length;i<n;i++)this.adErrorCallbackListeners[i](t)},o.prototype.onAdBreakReady=function(t){this.adBreakReadyListener&&this.adBreakReadyListener(t)},o.prototype.onContentPauseRequested=function(t){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(t)},o.prototype.onContentResumeRequested=function(t){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},o.prototype.onAllAdsCompleted=function(t){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},o.prototype.onAdLoaded=function(t){t.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},o.prototype.onAdStarted=function(t){this.currentAd=t.getAd(),!0===this.controller.settings.showAdContainerOnAdstart&&this.controller.adUi.removeClass(this.controller.adUi.adContainerDiv,"showAdContainerOnAdstart"),this.currentAd.isLinear()?(!0===this.controller.settings.showAdContainerOnAdstart&&this.controller.playerWrapper.vjsPlayer.pause(),this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},o.prototype.onAdPaused=function(){this.controller.onAdsPaused()},o.prototype.onAdResumed=function(t){this.controller.onAdsResumed()},o.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},o.prototype.onAdPlayheadTrackerInterval=function(){var t=this.adsManager.getRemainingTime(),e=this.currentAd.getDuration(),i=e-t;i=i>0?i:0;var n=0,s=void 0;this.currentAd.getAdPodInfo()&&(s=this.currentAd.getAdPodInfo().getAdPosition(),n=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(i,t,e,s,n)},o.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},o.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},o.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start(),this.controller.playerWrapper.vjsPlayer.trigger("ads-trigger-start")}catch(t){this.onAdError(t)}}},o.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},o.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},o.prototype.onPlayerVolumeChanged=function(t){this.adsManager&&this.adsManager.setVolume(t),this.adMuted=0==t},o.prototype.onPlayerResize=function(t,e,i){this.adsManager&&(this.adsManagerDimensions.width=t,this.adsManagerDimensions.height=e,this.adsManager.resize(t,e,google.ima.ViewMode.NORMAL))},o.prototype.getCurrentAd=function(){return this.currentAd},o.prototype.setAdBreakReadyListener=function(t){this.adBreakReadyListener=t},o.prototype.isAdPlaying=function(){return this.adPlaying},o.prototype.isAdMuted=function(){return this.adMuted},o.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},o.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},o.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},o.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},o.prototype.setVolume=function(t){this.adsManager.setVolume(t),this.adMuted=0==t},o.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainerInitialized=!0,this.adDisplayContainer.initialize()},o.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start(),this.controller.playerWrapper.vjsPlayer.trigger("ads-trigger-start"))},o.prototype.addEventListener=function(t,e){this.adsManager&&this.adsManager.addEventListener(t,e)},o.prototype.addErrorEventListener=function(t){this.adErrorCallbackListeners=this.adErrorCallbackListeners||[],this.adErrorCallbackListeners.push(t)},o.prototype.getAdsManager=function(){return this.adsManager},o.prototype.reset=function(){!1===this.controller.getSettings().autoPlayAdBreaks?this.autoPlayAdBreaks=!1:this.autoPlayAdBreaks=!0,this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var r=function(t,e){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isNoFullscreenAd=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(e);var s={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout,delayPreroll:this.settings.delayPreroll},r=this.extend({},s,e.contribAdsSettings||{});this.playerWrapper=new i(t,r,this),this.adUi=new n(this),this.sdkImpl=new o(this)};r.IMA_DEFAULTS={debug:!1,timeout:5e3,prerollTimeout:1e3,adLabel:"Advertisement",showControlsForJSAds:!0,adWillPlayMuted:!1,makeNonLinearBumpable:!0},r.prototype.initWithSettings=function(t){this.settings=this.extend({},r.IMA_DEFAULTS,t||{}),this.settings.id?(this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)):window.console.error("Error: must provide id of video.js div")},r.prototype.getSettings=function(){return this.settings},r.prototype.getIsMobile=function(){return this.isMobile},r.prototype.injectAdContainerDiv=function(t){this.playerWrapper.injectAdContainerDiv(t)},r.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv()},r.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer()},r.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},r.prototype.requestAds=function(){this.sdkImpl.requestAds()},r.prototype.triggerManualAdBreak=function(){this.sdkImpl.triggerManualAdBreak()},r.prototype.setSetting=function(t,e){this.settings[t]=e},r.prototype.onErrorLoadingAds=function(t){this.adUi.onAdError(),this.playerWrapper.onAdError(t,"adsLoaderError")},r.prototype.onAdPlayPauseClick=function(){this.sdkImpl.isAdPlaying()?(this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},r.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},r.prototype.setVolume=function(t){this.playerWrapper.setVolume(t),this.sdkImpl.setVolume(t)},r.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume()},r.prototype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen()},r.prototype.onAdError=function(t){this.adUi.onAdError(),this.playerWrapper.onAdError(t)},r.prototype.onAdBreakStart=function(t){this.playerWrapper.onAdBreakStart(t),this.adUi.onAdBreakStart(t)},r.prototype.showAdContainer=function(){this.adUi.showAdContainer()},r.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd(),this.adUi.onAdBreakEnd()},r.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted(),this.playerWrapper.onAllAdsCompleted()},r.prototype.onAdsPaused=function(){this.adUi.onAdsPaused()},r.prototype.onAdsResumed=function(){this.adUi.onAdsResumed()},r.prototype.onAdPlayheadUpdated=function(t,e,i,n,s){this.adUi.updateAdUi(t,e,i,n,s)},r.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},r.prototype.playContent=function(){this.playerWrapper.play()},r.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart(),this.playerWrapper.onAdStart()},r.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad()},r.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad(),this.playerWrapper.onAdStart()},r.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth()},r.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight()},r.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady()},r.prototype.onPlayerResize=function(t,e){this.sdkImpl.onPlayerResize(t,e)},r.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},r.prototype.onContentAndAdsCompleted=function(){for(var t in this.contentAndAdsEndedListeners)"function"==typeof this.contentAndAdsEndedListeners[t]&&this.contentAndAdsEndedListeners[t]()},r.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},r.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll()},r.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPlayerEnterFullscreen()},r.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen(),this.sdkImpl.onPlayerExitFullscreen()},r.prototype.onPlayerVolumeChanged=function(t){this.adUi.onPlayerVolumeChanged(t),this.sdkImpl.onPlayerVolumeChanged(t)},r.prototype.setContentWithAdTag=function(t,e,i){this.reset(),this.settings.adTagUrl=e||this.settings.adTagUrl,this.playerWrapper.changeSource(t,i)},r.prototype.setContentWithAdsResponse=function(t,e,i){this.reset(),this.settings.adsResponse=e||this.settings.adsResponse,this.playerWrapper.changeSource(t,i)},r.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset()},r.prototype.addContentEndedListener=function(t){this.playerWrapper.addContentEndedListener(t)},r.prototype.addContentAndAdsEndedListener=function(t){this.contentAndAdsEndedListeners.push(t)},r.prototype.setAdBreakReadyListener=function(t){this.sdkImpl.setAdBreakReadyListener(t)},r.prototype.setShowCountdown=function(t){this.adUi.setShowCountdown(t),this.showCountdown=t,this.countdownDiv.style.display=this.showCountdown?"block":"none"},r.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer()},r.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak()},r.prototype.addEventListener=function(t,e){this.sdkImpl.addEventListener(t,e)},r.prototype.addErrorEventListener=function(t){this.sdkImpl.addErrorEventListener(t)},r.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager()},r.prototype.changeAdTag=function(t){this.reset(),this.settings.adTagUrl=t,this.settings.adsResponse=null},r.prototype.pauseAd=function(){this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()},r.prototype.resumeAd=function(){this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds()},r.prototype.setAdsResponse=function(t){this.setSetting("adTagUrl",null),this.setSetting("adsResponse",t)},r.prototype.extend=function(t){for(var e=void 0,i=void 0,n=void 0,s=arguments.length,o=Array(s>1?s-1:0),r=1;r<s;r++)o[r-1]=arguments[r];for(i=0;i<o.length;i++)for(n in e=o[i])e.hasOwnProperty(n)&&(t[n]=e[n]);return t};var a=function(t,e){this.VPAIDHotspots=!1,this.controller=new r(t,e),this.addContentAndAdsEndedListener=function(t){this.controller.addContentAndAdsEndedListener(t)}.bind(this),this.addContentEndedListener=function(t){this.controller.addContentEndedListener(t)}.bind(this),this.addEventListener=function(t,e){this.controller.addEventListener(t,e)}.bind(this),this.addErrorEventListener=function(t){this.controller.addErrorEventListener(t)}.bind(this),this.changeAdTag=function(t){this.controller.changeAdTag(t)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.VPAIDHotspots=!1,this.controller.requestAds()}.bind(this),this.requestNonLinearAds=function(){this.VPAIDHotspots=!0,this.controller.requestAds()}.bind(this),this.isVPAIDHotspots=function(){return this.VPAIDHotspots}.bind(this),this.setAdsResponse=function(t){this.controller.setSetting("adTagUrl",null),this.controller.setSetting("adsResponse",t)}.bind(this),this.setSetting=function(t,e){this.controller.setSetting(t,e)}.bind(this),this.getSetting=function(t){return this.controller.getSettings()[t]}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(t){this.controller.setAdBreakReadyListener(t)}.bind(this),this.setContentWithAdTag=function(t,e,i){this.controller.setContentWithAdTag(t,e,i)}.bind(this),this.setContentWithAdsResponse=function(t,e,i){this.controller.setContentWithAdsResponse(t,e,i)}.bind(this),this.setShowCountdown=function(t){this.controller.setShowCountdown(t)}.bind(this),this.triggerManualAdBreak=function(){this.controller.triggerManualAdBreak()}.bind(this),this.switchToAutoPlayAdBreaks=function(){this.controller&&(this.controller.setSetting("delayPreroll",!1),this.controller.setSetting("autoPlayAdBreaks",!0),this.controller.setSetting("manualAdBreaks",!1)),this.autoPlayAdBreaks=!0,this.adsLoader&&this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks)}.bind(this)};(t.registerPlugin||t.plugin)("ima",function(t){this.ima=new a(this,t)})});